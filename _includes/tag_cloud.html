{% comment %}
<!--
- If tag_names array is not passed in as argument,
  - Create an empty array,
  - Obtain a tag name and push it to the array, and
  - Sort the tag names.
- List tags as a tag cloud.
-->
{% endcomment %}

{% if include.tag_names %}
{% assign tag_names = include.tag_names %}

{% else %}
{% assign tag_names = "" | split: "|"  %}

{% for posts_by_tag in site.tags %}
{% assign tag_names = tag_names | push: posts_by_tag.first %}
{% endfor %}

{% assign tag_names = tag_names | sort %}
{% endif %}

{% comment %}
Note that tags with different case letters are considered separate by jekyll, but will clash in their slugified ids.
{% endcomment %}

<div class="taxonomy taxonomy-terms-cloud taxo-tags">
    <h5 class="taxonomy-title">Tag Cloud</h5>
    <ul class="taxonomy-terms">
        {% for raw_tag_name in tag_names %}
        {% assign tag_name = raw_tag_name | default: "untagged" %}
        {% assign tag_id = tag_name | replace: "#", "hash-" %}
        <li>
            <a class="taxonomy-term"
                href="{{ baseurl }}/tags#{{ tag_id | slugize }}">
                <span class="taxonomy-label">{{ tag_name }}</span>
                <span class="taxonomy-count">({{ site.tags[raw_tag_name].size }})</span>
            </a>
        </li>
        {% endfor %}
    </ul>
</div>